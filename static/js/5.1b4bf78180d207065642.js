webpackJsonp([5],{"/0kH":function(t,e){},"2Sx8":function(t,e,a){"use strict";e.b=function(t){return Object(s.a)({url:"/comment/findCommentsByTarget",method:"get",params:t})},e.a=function(t){return Object(s.a)({url:"/comment/addComment",method:"post",params:t})};var s=a("vLgD")},Ha40:function(t,e,a){t.exports=a.p+"static/img/数据集成2.3bfc23a.png"},f2Us:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("3SA8"),o=a("ewfF"),n=a("1z0O"),i=a("W78t"),d=a.n(i),l=a("2Sx8"),r=a("vLgD");var c={components:{navBar:o.a,mavonEditor:n.mavonEditor},created:function(){this.dataId=this.$route.query.id,this.reloadDataDetail()},watch:{tab:function(t){3==t&&this.reload_comments()}},computed:{tab:function(){return this.show.detail_tab}},methods:{updatePaperDesc:function(){var t=this;Object(s.g)({datasetId:this.dataId,paperDesc:this.editor.txt.html()}).then(function(e){200==e.code?(t.$message({message:"更新成功",type:"success"}),t.show.editPaperDesc=!1,t.destroyEditor(),t.reloadDataDetail()):t.$message({message:"更新失败",type:"error"})})},initEditor:function(){var t=window.wangEditor;this.editor=new t("#editor"),this.editor.create(),this.editor.txt.html(this.dataset.paperDesc||"")},destroyEditor:function(){document.getElementById("editorDiv").innerHTML="<div id='editor'></div>"},handleChange:function(t){console.log(t)},goBack:function(){this.$router.push("/datas")},addCollect:function(){var t;t={targetId:this.dataId,type:"DATA_COLLECT"},Object(r.a)({url:"/collect/addCollect",method:"get",params:t})},addPapers:function(){var t=this;addDataRefBatch({data_id:this.dataId,paperIds:this.v.paperModel.paperIds}).then(function(e){200==e.code&&t.$message({message:"添加成功",type:"success"})})},editPaperDesc:function(t){"show"==t&&(this.show.editPaperDesc=!0)},delComment:function(t){var e=this;axios.get("/comment/delComment?id="+t).then(function(t){200==t.code&&(e.$message({message:"删除成功",type:"success"}),e.reload_comments())})},addComment:function(){var t=this;Object(l.a)({content:this.comment,targetId:this.dataId}).then(function(e){200==e.code&&(t.$message({message:"添加成功",type:"success"}),t.reload_comments(),t.comment="")})},reload_comments:function(){var t=this;Object(l.b)({targetId:this.dataId}).then(function(e){200==e.code&&(e.data=e.data||[],e.data.forEach(function(t){t.replys=[]}),t.list.comments=e.data)})},reloadReply:function(t){Object(l.b)({targetId:t.id}).then(function(t){200==t.code&&t.replys.push(t.data)})},download:function(t){this.show.download=!0},reloadDataDetail:function(){var t=this;Object(s.c)({id:t.dataId}).then(function(e){200==e.code&&(t.dataset=e.data||{},t.displayDatasetTable=d()(decodeURIComponent(t.dataset.datasetTable)),t.displayDatasetDesc=d()(decodeURIComponent(t.dataset.datasetDesc)))}).catch(function(t){})}},data:function(){return{displayDatasetTable:"",displayDatasetDesc:"",editor:"",paperDesc:"",showReplyComments:[],v:{},comment:"",dataset:{id:"",title:"",score:0,isCollect:"",collectCount:"",downloadCount:"",datasetSize:"",datasetDesc:"",datasetTable:"",logo:"",paperText:""},rateScore:0,collectTimes:0,dataId:"",loadings:{},show:{detail_tab:"1",editPaperDesc:!1,download:!1},title:"商品名称",list:{papers:[],comments:[]}}}},m={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("navBar",{attrs:{cur:"2"}}),t._v(" "),s("el-dialog",{attrs:{visible:t.show.download,width:"70%",title:"下载"},on:{"update:visible":function(e){return t.$set(t.show,"download",e)}}},[t.dataset.useNetDisk?s("div",[s("h3",[t._v("这是一个存放在百度网盘上的文件，请点击下面的连接跳转到网盘地址")]),t._v(" "),s("hr"),t._v(" "),s("el-form",{attrs:{"label-width":"100px"}},[s("el-form-item",{attrs:{label:"连接地址"}},[s("el-tag",[s("a",{attrs:{href:t.dataset.netDiskUrl,target:"_blank"}},[t._v(t._s(t.dataset.netDiskUrl))])])],1),t._v(" "),s("el-form-item",{attrs:{label:"提取密码"}},[s("el-tag",[t._v(t._s(t.dataset.netDiskPassword))])],1)],1)],1):s("div",[s("h3",[t._v("这是一个存放在服务器上的文件，请点击下面的连接下载")]),t._v(" "),s("hr"),t._v(" "),s("el-tag",[t._v(t._s(t.fileDownloadPath+"?fileCode="+t.dataset.fileCode))])],1)]),t._v(" "),s("div",[s("div",[s("el-page-header",{staticStyle:{"margin-top":"30px","margin-left":"30px"},attrs:{content:t.dataset.title},on:{back:function(e){return t.goBack()}}}),t._v(" "),s("el-divider"),t._v(" "),s("br"),t._v(" "),s("el-row",[s("el-col",{attrs:{span:6,offset:4}},[t.dataset.logo?s("img",{staticStyle:{height:"100%",width:"100%"},attrs:{src:t.fileDownloadPath+"?fileCode="+t.dataset.logo}}):s("img",{staticStyle:{height:"100%",width:"100%",margin:"20px"},attrs:{src:a("Ha40"),alt:""}})]),t._v(" "),s("el-col",{attrs:{span:10,offset:1}},[s("el-form",{staticStyle:{"margin-top":"50px","margin-left":"20px"},attrs:{size:"mini"}},[s("el-form-item",{attrs:{label:"数据评分"}},[s("el-rate",{model:{value:t.dataset.score,callback:function(e){t.$set(t.dataset,"score",e)},expression:"dataset.score"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"收藏次数"}},[t._v(t._s(t.dataset.collectCount))]),t._v(" "),s("el-form-item",{attrs:{label:"下载次数"}},[t._v(t._s(t.dataset.downloadCount))]),t._v(" "),s("el-form-item",{attrs:{label:"数据大小"}},[t._v(t._s(t.fsize(t.dataset.datasetSize)))])],1),t._v(" "),s("el-divider"),t._v(" "),s("div",[s("el-button-group",[s("el-button",{staticClass:"el-icon-star-on",attrs:{round:"",size:"mini"},on:{click:function(e){return t.addCollect(t.dataset)}}},[t._v("收藏")]),t._v(" "),s("el-button",{staticClass:"el-icon-download",attrs:{round:"",size:"mini"},on:{click:function(e){return t.download(t.dataset)}}},[t._v("下载")]),t._v(" "),s("el-button",{staticClass:"el-icon-s-promotion",attrs:{round:"",size:"mini"},on:{click:function(e){return t.share(t.dataset)}}},[t._v("分享")])],1)],1)],1)],1),t._v(" "),s("el-tabs",{staticStyle:{margin:"0 100px","min-height":"400px"},model:{value:t.show.detail_tab,callback:function(e){t.$set(t.show,"detail_tab",e)},expression:"show.detail_tab"}},[s("el-tab-pane",{attrs:{label:"数据描述",name:"1"}},[s("div",[s("mavon-editor",{attrs:{placeholder:"暂无数据描述",toolbarsFlag:!1,defaultOpen:"preview",subfield:!1,boxShadow:!1},model:{value:t.displayDatasetDesc,callback:function(e){t.displayDatasetDesc=e},expression:"displayDatasetDesc"}})],1)]),t._v(" "),s("el-tab-pane",{attrs:{label:"数据表格",name:"2"}},[s("div",[s("mavon-editor",{attrs:{placeholder:"暂无数据表格",toolbarsFlag:!1,defaultOpen:"preview",subfield:!1,boxShadow:!1},model:{value:t.displayDatasetTable,callback:function(e){t.displayDatasetTable=e},expression:"displayDatasetTable"}})],1)]),t._v(" "),s("el-tab-pane",{attrs:{label:"评论",name:"3"}},[s("div",[s("el-input",{attrs:{placeholder:"添加评论",maxlength:200,minlength:1},model:{value:t.comment,callback:function(e){t.comment="string"==typeof e?e.trim():e},expression:"comment"}},[s("el-button",{attrs:{slot:"append"},on:{click:function(e){return t.addComment()}},slot:"append"},[t._v("评论")])],1),t._v(" "),s("el-table",{attrs:{data:t.list.comments,"show-header":!1,"empty-text":"暂无评论"}},[s("el-table-column",{attrs:{prop:"content"}}),t._v(" "),s("el-table-column",{attrs:{width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("i",{staticClass:"el-icon-delete",staticStyle:{cursor:"pointer"},on:{click:function(a){return t.delComment(e.row.id)}}})]}}])})],1)],1)]),t._v(" "),s("el-tab-pane",{attrs:{label:"相关文献",name:"4"}},[s("div",[t.dataset.paperText?s("div",{domProps:{innerHTML:t._s(t.dataset.paperText)}}):s("div",{staticStyle:{"padding-top":"20px"}},[t._v("还没有文献敢使用该数据集~")])])])],1)],1)])],1)},staticRenderFns:[]};var u=a("VU/8")(c,m,!1,function(t){a("/0kH")},null,null);e.default=u.exports}});